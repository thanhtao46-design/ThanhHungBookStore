<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Káº¿t Quáº£ Cho "arya"</title>
    <link rel="stylesheet" href="../css/user.css" />
  </head>
  <body>
    <header class="header">
      <div class="inner">
        <!-- Left -->
        <div class="header-left">
          <div class="logo" onclick="location.href='home_loggedin.html'">
            <img src="../img/logo.png" alt="ThÃ nh HÆ°ng logo" />
            <h1>ThÃ nh HÆ°ng BookStore</h1>
          </div>
        </div>

        <!-- Center -->
        <div class="header-center">
          <a href="home_loggedin.html" class="dropbtn">Trang chá»§</a>
          <div class="dropdown">
            <button class="dropbtn">Thá»ƒ loáº¡i â–¼</button>
            <div class="dropdown-content">
              <a class="btn--light" href="home_loggedin.html">Tiá»ƒu thuyáº¿t</a>
              <a class="btn--light" href="shop1.html">Manga</a>
              <a class="btn--light" href="home_loggedin.html">Lá»‹ch sá»­</a>
              <a class="btn--light" href="shop1.html">TÃ¢m lÃ½ há»c</a>
              <a class="btn--light" href="home_loggedin.html">GiÃ¡o dá»¥c</a>
              <a class="btn--light" href="shop1.html">TÃ i liá»‡u</a>
              <a class="btn--light" href="home_loggedin.html">Tham kháº£o</a>
              <a class="btn--light" href="shop1.html">HÆ°á»›ng dáº«n</a>
              <a class="btn--light" href="home_loggedin.html">Light Novel</a>
              <a class="btn--light" href="shop1.html">Khoa há»c</a>
            </div>
          </div>

          <div class="search">
            <input placeholder="TÃ¬m kiáº¿m sÃ¡ch..." />
            <a class="btn" href="search.html">TÃ¬m kiáº¿m</a>
          </div>
        </div>

        <!-- Right -->
        <div class="header-right">
          <div class="dropdown">
            <button class="dropbtn">Thanh Cao â–¼</button>
            <div class="dropdown-content">
              <button class="btn btn--light" onclick="location='userinfo.html'">
                Chi tiáº¿t
              </button>
              <button class="btn btn--light" onclick="location='../index.html'">
                ÄÄƒng xuáº¥t
              </button>
            </div>
          </div>
          <button id="cart-btn" class="dropbtn" onclick="location='cart.html'">
            ğŸ›’ <span id="cart-count">0</span>
          </button>
        </div>
      </div>
    </header>
    <h1 style="text-align: center">
      TÃ¬m tháº¥y 12 má»¥c trÃ¹ng khá»›p vá»›i <span style="color: blue">"arya"</span>
    </h1>
    <main class="container">
      <div style="text-align: center; margin: 20px 0">
        <button id="openFilter" class="btn">TÃ¬m kiáº¿m nÃ¢ng cao</button>
      </div>

      <!-- ğŸ” Popup Modal -->
      <div id="filterModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2>ğŸ” TÃ¬m kiáº¿m nÃ¢ng cao</h2>

          <div class="filter-grid">
            <div class="filter-item">
              <label for="searchKeyword">TÃªn sÃ¡ch:</label>
              <input
                type="text"
                id="searchKeyword"
                placeholder="Nháº­p tÃªn sÃ¡ch..."
              />
            </div>

            <div class="filter-item">
              <label for="category">Thá»ƒ loáº¡i:</label>
              <select id="category">
                <option value="">Táº¥t cáº£</option>
                <option value="tieuthuyet">Tiá»ƒu thuyáº¿t</option>
                <option value="manga">Manga</option>
                <option value="tamly">TÃ¢m lÃ½ há»c</option>
                <option value="giaoduc">GiÃ¡o dá»¥c</option>
              </select>
            </div>

            <div class="filter-item">
              <label for="publisher">NhÃ  xuáº¥t báº£n:</label>
              <select id="publisher">
                <option value="">Táº¥t cáº£</option>
                <option value="kimdong">NXB Kim Äá»“ng</option>
                <option value="vanhoc">NXB VÄƒn Há»c</option>
                <option value="tre">NXB Tráº»</option>
                <option value="giaoduc">NXB GiÃ¡o Dá»¥c</option>
              </select>
            </div>

            <div class="filter-item">
              <label for="origin">Xuáº¥t xá»©:</label>
              <select id="origin">
                <option value="">Táº¥t cáº£</option>
                <option value="vn">Viá»‡t Nam</option>
                <option value="jp">Nháº­t Báº£n</option>
                <option value="us">Má»¹</option>
                <option value="uk">Anh</option>
              </select>
            </div>

            <div class="filter-item">
              <label for="rating">ÄÃ¡nh giÃ¡ sao:</label>
              <select id="rating">
                <option value="">Táº¥t cáº£</option>
                <option value="1">â‰¥ 1â˜…</option>
                <option value="2">â‰¥ 2â˜…</option>
                <option value="3">â‰¥ 3â˜…</option>
                <option value="4">â‰¥ 4â˜…</option>
                <option value="5">5â˜…</option>
              </select>
            </div>
          </div>

          <div class="price-section">
            <label>Khoáº£ng giÃ¡:</label>
            <div class="price-inputs">
              <input type="text" id="minPrice" value="0" />
              <span>-</span>
              <input type="text" id="maxPrice" value="5,000,000" />
            </div>
            <div class="range-container">
              <div class="slider-track"></div>
              <input
                type="range"
                id="rangeMin"
                min="0"
                max="5000000"
                value="0"
                step="10000"
              />
              <input
                type="range"
                id="rangeMax"
                min="0"
                max="5000000"
                value="5000000"
                step="10000"
              />
            </div>
          </div>

          <div class="filter-actions">
            <button id="applyFilter" class="filter-btn">TÃ¬m kiáº¿m</button>
            <button id="resetFilter" class="filter-btn ghost">Äáº·t láº¡i</button>
          </div>
        </div>
      </div>

      <div class="grid">
        <div class="card" onclick="location.href='product1.html'">
          <img src="../img/aryabanben.jpg" />
          <h3>Sá»‘ Ä‘á»</h3>
          <div class="price">â‚«110,000</div>
          <div class="rating">â˜…â˜…â˜…â˜…â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product2.html'">
          <img src="../img/thiensu.jpg" />
          <h3>Ná»•i buá»“n chiáº¿n tranh</h3>
          <div class="price">â‚«115,000</div>
          <div class="rating">â˜…â˜…â˜…â˜…â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product1.html'">
          <img src="../img/tuoitre.jpg" />
          <h3>Tuá»•i tráº» Ä‘Ã¡ng giÃ¡ bao nhiÃªu</h3>
          <div class="price">â‚«95,000</div>
          <div class="rating">â˜…â˜…â˜…â˜…â˜…</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product2.html'">
          <img src="../img/dacnhantam.jpg" />
          <h3>Äáº¯c nhÃ¢n tÃ¢m</h3>
          <div class="price">â‚«125,000</div>
          <div class="rating">â˜…â˜†â˜†â˜†â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product1.html'">
          <img src="../img/nhagiakim.jpg" />
          <h3>NhÃ  giáº£ kim</h3>
          <div class="price">â‚«100,000</div>
          <div class="rating">â˜…â˜…â˜†â˜†â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product2.html'">
          <img src="../img/hatgiong.jpg" />
          <h3>Háº¡t giá»‘ng tÃ¢m há»“n-16</h3>
          <div class="price">â‚«85,000</div>
          <div class="rating">â˜…â˜…â˜…â˜†â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product1.html'">
          <img src="../img/thep.jpg" />
          <h3>ThÃ©p Ä‘Ã£ tÃ´i tháº¿ Ä‘áº¥y</h3>
          <div class="price">â‚«100,000</div>
          <div class="rating">â˜…â˜…â˜…â˜†â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product2.html'">
          <img src="../img/vutru.jpg" />
          <h3>VÅ© trá»¥ trong vá» háº¡t dáº»</h3>
          <div class="price">â‚«140,000</div>
          <div class="rating">â˜…â˜…â˜…â˜…â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product1.html'">
          <img src="../img/demen.jpg" />
          <h3>Dáº¿ mÃ¨n phiÃªu lÆ°u kÃ½</h3>
          <div class="price">â‚«80,000</div>
          <div class="rating">â˜…â˜…â˜…â˜…â˜…</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product2.html'">
          <img src="../img/harry.jpg" />
          <h3>Harry Potter and the Sorcererâ€™s Stone</h3>
          <div class="price">â‚«120,000</div>
          <div class="rating">â˜…â˜…â˜…â˜…â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product1.html'">
          <img src="../img/chipheo.jpg" />
          <h3>ChÃ­ PhÃ¨o</h3>
          <div class="price">â‚«70,000</div>
          <div class="rating">â˜…â˜…â˜†â˜†â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product2.html'">
          <img src="../img/tatden.jpg" />
          <h3>Táº¯t Ä‘Ã¨n</h3>
          <div class="price">â‚«80,000</div>
          <div class="rating">â˜…â˜…â˜…â˜†â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
      </div>
    </main>

    <script>
      // ===== MODAL HIá»‚N THá»Š / áº¨N =====
      const modal = document.getElementById("filterModal");
      const openBtn = document.getElementById("openFilter");
      const closeBtn = document.querySelector(".close");

      openBtn.onclick = () => (modal.style.display = "flex");
      closeBtn.onclick = () => (modal.style.display = "none");
      window.onclick = (e) => {
        if (e.target === modal) modal.style.display = "none";
      };

      // ===== THANH KHOáº¢NG GIÃ =====
      const rangeMin = document.getElementById("rangeMin");
      const rangeMax = document.getElementById("rangeMax");
      const minInput = document.getElementById("minPrice");
      const maxInput = document.getElementById("maxPrice");
      const track = document.querySelector(".slider-track");

      const maxLimit = 5000000;
      const priceGap = 10000;

      function fillTrack() {
        const minVal = +rangeMin.value;
        const maxVal = +rangeMax.value;
        const p1 = (minVal / maxLimit) * 100;
        const p2 = (maxVal / maxLimit) * 100;
        track.style.background = `linear-gradient(to right, #ddd ${p1}% , #43a047 ${p1}% , #43a047 ${p2}%, #ddd ${p2}%)`;
      }

      function syncFromRange(e) {
        let minVal = +rangeMin.value,
          maxVal = +rangeMax.value;
        if (maxVal - minVal < priceGap) {
          if (e.target.id === "rangeMin") rangeMin.value = maxVal - priceGap;
          else rangeMax.value = minVal + priceGap;
        }
        minInput.value = (+rangeMin.value).toLocaleString();
        maxInput.value = (+rangeMax.value).toLocaleString();
        fillTrack();
      }

      function syncFromInput() {
        let minVal = +minInput.value.replace(/\D/g, "");
        let maxVal = +maxInput.value.replace(/\D/g, "");
        if (minVal < 0) minVal = 0;
        if (maxVal > maxLimit) maxVal = maxLimit;
        if (minVal > maxVal - priceGap) minVal = maxVal - priceGap;

        rangeMin.value = minVal;
        rangeMax.value = maxVal;
        minInput.value = minVal.toLocaleString();
        maxInput.value = maxVal.toLocaleString();
        fillTrack();
      }

      [minInput, maxInput].forEach((el) =>
        el.addEventListener("input", syncFromInput)
      );
      [rangeMin, rangeMax].forEach((el) =>
        el.addEventListener("input", syncFromRange)
      );
      fillTrack();

      // ===== GIá» HÃ€NG & NÃšT THÃŠM =====
      document.addEventListener("DOMContentLoaded", () => {
        const cartCountSpan = document.getElementById("cart-count");
        let cartCount = Number(cartCountSpan?.textContent || 0);

        document.querySelectorAll(".card").forEach((card) => {
          const inline = card.getAttribute("onclick");
          let url = null;
          if (inline) {
            const match = inline.match(/'(.*?)'|"(.*?)"/);
            url = match ? match[1] || match[2] : null;
          }

          // Click card â†’ má»Ÿ sáº£n pháº©m
          card.addEventListener("click", () => {
            if (url) location.href = url;
          });

          // NÃºt thÃªm vÃ o giá» â†’ khÃ´ng lan click
          const addBtn = card.querySelector(".btn.ghost");
          if (addBtn) {
            addBtn.addEventListener("click", (e) => {
              e.stopPropagation();
              cartCount++;
              cartCountSpan.textContent = cartCount;
              alert("ÄÃ£ thÃªm sáº£n pháº©m vÃ o giá» hÃ ng!");
            });
          }
        });
      });

      // ===== CHá»¨C NÄ‚NG TÃŒM KIáº¾M DEMO =====
      const applyBtn = document.getElementById("applyFilter");
      const resetBtn = document.getElementById("resetFilter");

      applyBtn.addEventListener("click", () => {
        const cards = document.querySelectorAll(".card");

        // áº¨n ngáº«u nhiÃªn má»™t vÃ i sáº£n pháº©m
        cards.forEach((card) => {
          card.style.display = Math.random() > 0.5 ? "block" : "none";
        });
        modal.style.display = "none";
      });

      resetBtn.addEventListener("click", () => {
        const cards = document.querySelectorAll(".card");
        cards.forEach((card) => (card.style.display = "block"));

        rangeMin.value = 0;
        rangeMax.value = maxLimit;
        minInput.value = "0";
        maxInput.value = maxLimit.toLocaleString();
        fillTrack();
      });
    </script>
  </body>
</html>
