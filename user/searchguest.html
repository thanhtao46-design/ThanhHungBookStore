<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Káº¿t Quáº£ Cho "So Do"</title>
    <link rel="stylesheet" href="../css/user.css" />
  </head>
  <body>
    <header class="header">
      <div class="inner">
        <!-- Left -->
        <div class="header-left">
          <div class="logo" onclick="location.href='../index.html'">
            <img src="../img/logo.png" alt="ThÃ nh HÆ°ng logo" />
            <h1>ThÃ nh HÆ°ng BookStore</h1>
          </div>
        </div>

        <!-- Center -->
        <div class="header-center">
          <a href="../index.html" class="dropbtn">Trang chá»§</a>
          <div class="dropdown">
            <button class="dropbtn">Thá»ƒ loáº¡i â–¼</button>
            <div class="dropdown-content">
              <a class="btn--light" href="../index.html">Tiá»ƒu thuyáº¿t</a>
              <a class="btn--light" href="shop1guest.html">Manga</a>
              <a class="btn--light" href="../index.html">Lá»‹ch sá»­</a>
              <a class="btn--light" href="shop1guest.html">TÃ¢m lÃ½ há»c</a>
              <a class="btn--light" href="../index.html">GiÃ¡o dá»¥c</a>
              <a class="btn--light" href="shop1guest.html">TÃ i liá»‡u</a>
              <a class="btn--light" href="index.html">Tham kháº£o</a>
              <a class="btn--light" href="shop1guest.html">HÆ°á»›ng dáº«n</a>
              <a class="btn--light" href="../index.html">Light Novel</a>
              <a class="btn--light" href="shop1guest.html">Khoa há»c</a>
            </div>
          </div>

          <div class="search">
            <input placeholder="TÃ¬m kiáº¿m sÃ¡ch..." />
            <a class="btn" href="searchguest.html">TÃ¬m kiáº¿m</a>
          </div>
        </div>

        <!-- Right -->
        <div class="header-right">
          <div class="dropdown">
            <button class="dropbtn">TÃ i khoáº£n â–¼</button>
            <div class="dropdown-content">
              <button class="btn btn--light" onclick="openLoginPopup()">
                ÄÄƒng nháº­p
              </button>
              <button class="btn btn--light" onclick="openRegisterPopup()">
                ÄÄƒng kÃ½
              </button>
            </div>
          </div>
          <button class="dropbtn" onclick="location='emptycartguest.html'">
            ğŸ›’
          </button>
        </div>
      </div>
    </header>
    <h1 style="text-align: center">
      TÃ¬m tháº¥y 12 má»¥c trÃ¹ng khá»›p vá»›i <span style="color: blue">"So Do"</span>
    </h1>
    <main class="container">
      <div style="text-align: center; margin: 20px 0">
        <button id="openFilter" class="btn">TÃ¬m kiáº¿m nÃ¢ng cao</button>
      </div>

      <!-- ğŸ” Popup Modal -->
      <div id="filterModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2>ğŸ” TÃ¬m kiáº¿m nÃ¢ng cao</h2>

          <div class="filter-grid">
            <div class="filter-item">
              <label for="searchKeyword">TÃªn sÃ¡ch:</label>
              <input
                type="text"
                id="searchKeyword"
                placeholder="Nháº­p tÃªn sÃ¡ch..."
              />
            </div>

            <div class="filter-item">
              <label for="category">Thá»ƒ loáº¡i:</label>
              <select id="category">
                <option value="">Táº¥t cáº£</option>
                <option value="tieuthuyet">Tiá»ƒu thuyáº¿t</option>
                <option value="manga">Manga</option>
                <option value="tamly">TÃ¢m lÃ½ há»c</option>
                <option value="giaoduc">GiÃ¡o dá»¥c</option>
              </select>
            </div>

            <div class="filter-item">
              <label for="publisher">NhÃ  xuáº¥t báº£n:</label>
              <select id="publisher">
                <option value="">Táº¥t cáº£</option>
                <option value="kimdong">NXB Kim Äá»“ng</option>
                <option value="vanhoc">NXB VÄƒn Há»c</option>
                <option value="tre">NXB Tráº»</option>
                <option value="giaoduc">NXB GiÃ¡o Dá»¥c</option>
              </select>
            </div>

            <div class="filter-item">
              <label for="origin">Xuáº¥t xá»©:</label>
              <select id="origin">
                <option value="">Táº¥t cáº£</option>
                <option value="vn">Viá»‡t Nam</option>
                <option value="jp">Nháº­t Báº£n</option>
                <option value="us">Má»¹</option>
                <option value="uk">Anh</option>
              </select>
            </div>

            <div class="filter-item">
              <label for="rating">ÄÃ¡nh giÃ¡ sao:</label>
              <select id="rating">
                <option value="">Táº¥t cáº£</option>
                <option value="1">â‰¥ 1â˜…</option>
                <option value="2">â‰¥ 2â˜…</option>
                <option value="3">â‰¥ 3â˜…</option>
                <option value="4">â‰¥ 4â˜…</option>
                <option value="5">5â˜…</option>
              </select>
            </div>
          </div>

          <div class="price-section">
            <label>Khoáº£ng giÃ¡:</label>
            <div class="price-inputs">
              <input type="text" id="minPrice" value="0" />
              <span>-</span>
              <input type="text" id="maxPrice" value="5,000,000" />
            </div>
            <div class="range-container">
              <div class="slider-track"></div>
              <input
                type="range"
                id="rangeMin"
                min="0"
                max="5000000"
                value="0"
                step="10000"
              />
              <input
                type="range"
                id="rangeMax"
                min="0"
                max="5000000"
                value="5000000"
                step="10000"
              />
            </div>
          </div>

          <div class="filter-actions">
            <button id="applyFilter" class="filter-btn">TÃ¬m kiáº¿m</button>
            <button id="resetFilter" class="filter-btn ghost">Äáº·t láº¡i</button>
          </div>
        </div>
      </div>

        <div class="grid">
        <div class="card" onclick="location.href='product1guest.html'">
          <img src="../img/aryabanben.jpg" />
          <h3>Sá»‘ Ä‘á»</h3>
          <div class="price">â‚«110,000</div>
          <div class="rating">â˜…â˜…â˜…â˜…â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product2guest.html'">
          <img src="../img/thiensu.jpg" />
          <h3>Ná»•i buá»“n chiáº¿n tranh</h3>
          <div class="price">â‚«115,000</div>
          <div class="rating">â˜…â˜…â˜…â˜…â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product1guest.html'">
          <img src="../img/tuoitre.jpg" />
          <h3>Tuá»•i tráº» Ä‘Ã¡ng giÃ¡ bao nhiÃªu</h3>
          <div class="price">â‚«95,000</div>
          <div class="rating">â˜…â˜…â˜…â˜…â˜…</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product2guest.html'">
          <img src="../img/dacnhantam.jpg" />
          <h3>Äáº¯c nhÃ¢n tÃ¢m</h3>
          <div class="price">â‚«125,000</div>
          <div class="rating">â˜…â˜†â˜†â˜†â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product1guest.html'">
          <img src="../img/nhagiakim.jpg" />
          <h3>NhÃ  giáº£ kim</h3>
          <div class="price">â‚«100,000</div>
          <div class="rating">â˜…â˜…â˜†â˜†â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product2guest.html'">
          <img src="../img/hatgiong.jpg" />
          <h3>Háº¡t giá»‘ng tÃ¢m há»“n-16</h3>
          <div class="price">â‚«85,000</div>
          <div class="rating">â˜…â˜…â˜…â˜†â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product1guest.html'">
          <img src="../img/thep.jpg" />
          <h3>ThÃ©p Ä‘Ã£ tÃ´i tháº¿ Ä‘áº¥y</h3>
          <div class="price">â‚«100,000</div>
          <div class="rating">â˜…â˜…â˜…â˜†â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product2guest.html'">
          <img src="../img/vutru.jpg" />
          <h3>VÅ© trá»¥ trong vá» háº¡t dáº»</h3>
          <div class="price">â‚«140,000</div>
          <div class="rating">â˜…â˜…â˜…â˜…â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product1guest.html'">
          <img src="../img/demen.jpg" />
          <h3>Dáº¿ mÃ¨n phiÃªu lÆ°u kÃ½</h3>
          <div class="price">â‚«80,000</div>
          <div class="rating">â˜…â˜…â˜…â˜…â˜…</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product2guest.html'">
          <img src="../img/harry.jpg" />
          <h3>Harry Potter and the Sorcererâ€™s Stone</h3>
          <div class="price">â‚«120,000</div>
          <div class="rating">â˜…â˜…â˜…â˜…â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product1guest.html'">
          <img src="../img/chipheo.jpg" />
          <h3>ChÃ­ PhÃ¨o</h3>
          <div class="price">â‚«70,000</div>
          <div class="rating">â˜…â˜…â˜†â˜†â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
        <div class="card" onclick="location.href='product2guest.html'">
          <img src="../img/tatden.jpg" />
          <h3>Táº¯t Ä‘Ã¨n</h3>
          <div class="price">â‚«80,000</div>
          <div class="rating">â˜…â˜…â˜…â˜†â˜†</div>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button class="btn ghost">ThÃªm vÃ o giá»</button>
          </div>
        </div>
      </div>
    </div>

    <div id="login-popup" class="popup">
      <div class="popup-box">
        <span class="close-btn" onclick="closeLoginPopup()">Ã—</span>
        <h2>ÄÄƒng nháº­p tÃ i khoáº£n</h2>
        <form class="popup-form">
          <input type="text" placeholder="TÃªn Ä‘Äƒng nháº­p" />
          <input type="password" placeholder="Máº­t kháº©u" />
          <button
            type="button"
            class="btn btn--primary"
            style="width: 100%"
            onclick="location.href='home_loggedin.html'"
          >
            ÄÄƒng nháº­p
          </button>
          <p style="text-align: center; margin-top: 10px; font-size: 14px">
            ChÆ°a cÃ³ tÃ i khoáº£n?
            <a href="#" onclick="switchToRegister()">ÄÄƒng kÃ½ ngay</a>
          </p>
        </form>
      </div>
    </div>

    <!-- POPUP ÄÄ‚NG KÃ -->
    <div id="register-popup" class="popup">
      <div class="popup-box">
        <span class="close-btn" onclick="closeRegisterPopup()">Ã—</span>
        <h2>Táº¡o tÃ i khoáº£n má»›i</h2>
        <form class="popup-form">
          <input type="text" placeholder="TÃªn Ä‘Äƒng nháº­p" />
          <input type="email" placeholder="Email" />
          <input type="password" placeholder="Máº­t kháº©u" />
          <button
            type="button"
            class="btn btn--primary"
            style="width: 100%"
            onclick="location.href='home_loggedin.html'"
          >
            ÄÄƒng kÃ½
          </button>
          <p style="text-align: center; margin-top: 10px; font-size: 14px">
            ÄÃ£ cÃ³ tÃ i khoáº£n?
            <a href="#" onclick="switchToLogin()">ÄÄƒng nháº­p</a>
          </p>
        </form>
      </div>
    </div>

    <script>
      function openLoginPopup() {
        document.getElementById("login-popup").style.display = "flex";
      }
      function closeLoginPopup() {
        document.getElementById("login-popup").style.display = "none";
      }
      function openRegisterPopup() {
        document.getElementById("register-popup").style.display = "flex";
      }
      function closeRegisterPopup() {
        document.getElementById("register-popup").style.display = "none";
      }

      /* ÄÃ³ng khi click ra ngoÃ i */
      window.addEventListener("click", function (e) {
        const login = document.getElementById("login-popup");
        const register = document.getElementById("register-popup");
        if (e.target === login) closeLoginPopup();
        if (e.target === register) closeRegisterPopup();
      });

      /* Chuyá»ƒn qua láº¡i giá»¯a 2 popup */
      function switchToRegister() {
        closeLoginPopup();
        setTimeout(openRegisterPopup, 200);
      }
      function switchToLogin() {
        closeRegisterPopup();
        setTimeout(openLoginPopup, 200);
      }

      // Äáº£m báº£o click card Ä‘á»ƒ má»Ÿ trang sáº£n pháº©m
      document.querySelectorAll(".card").forEach((card) => {
        // Láº¥y link trong onclick hoáº·c bá» trong data-link
        const inlineLink = card.getAttribute("onclick");
        const match = inlineLink?.match(/'(.*?)'/);
        const link = match ? match[1] : null;

        if (link) {
          // Gáº¯n láº¡i sá»± kiá»‡n click chuáº©n
          card.addEventListener("click", () => {
            location.href = link;
          });
        }

        // Xá»­ lÃ½ nÃºt "ThÃªm vÃ o giá»" â€” cháº·n lan sá»± kiá»‡n click
        const addBtn = card.querySelector(".btn.ghost");
        if (addBtn) {
          addBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            alert("ÄÄƒng nháº­p hoáº·c Ä‘Äƒng kÃ­ Ä‘á»ƒ tiáº¿p tá»¥c!");
          });
        }
      });

      // === Popup hiá»ƒn thá»‹ / áº©n ===
const modal = document.getElementById("filterModal");
const openBtn = document.getElementById("openFilter");
const closeBtn = document.querySelector(".modal .close");

openBtn.onclick = () => (modal.style.display = "flex");
closeBtn.onclick = () => (modal.style.display = "none");
window.onclick = (e) => {
  if (e.target === modal) modal.style.display = "none";
};

// === Thanh trÆ°á»£t giÃ¡ ===
const rangeMin = document.getElementById("rangeMin");
const rangeMax = document.getElementById("rangeMax");
const minInput = document.getElementById("minPrice");
const maxInput = document.getElementById("maxPrice");
const track = document.querySelector(".slider-track");
const maxLimit = 5000000;
const priceGap = 10000;

function fillTrack() {
  const minVal = +rangeMin.value;
  const maxVal = +rangeMax.value;
  const p1 = (minVal / maxLimit) * 100;
  const p2 = (maxVal / maxLimit) * 100;
  track.style.background = `linear-gradient(to right, #ddd ${p1}%, #43a047 ${p1}%, #43a047 ${p2}%, #ddd ${p2}%)`;
}

function syncFromRange(e) {
  let minVal = +rangeMin.value,
    maxVal = +rangeMax.value;
  if (maxVal - minVal < priceGap) {
    if (e.target.id === "rangeMin") rangeMin.value = maxVal - priceGap;
    else rangeMax.value = minVal + priceGap;
  }
  minInput.value = (+rangeMin.value).toLocaleString();
  maxInput.value = (+rangeMax.value).toLocaleString();
  fillTrack();
}

function syncFromInput() {
  let minVal = +minInput.value.replace(/\D/g, "");
  let maxVal = +maxInput.value.replace(/\D/g, "");
  if (minVal < 0) minVal = 0;
  if (maxVal > maxLimit) maxVal = maxLimit;
  if (minVal > maxVal - priceGap) minVal = maxVal - priceGap;

  rangeMin.value = minVal;
  rangeMax.value = maxVal;
  minInput.value = minVal.toLocaleString();
  maxInput.value = maxVal.toLocaleString();
  fillTrack();
}

[minInput, maxInput].forEach((el) => el.addEventListener("input", syncFromInput));
[rangeMin, rangeMax].forEach((el) => el.addEventListener("input", syncFromRange));
fillTrack();

// === NÃºt Ã¡p dá»¥ng & Ä‘áº·t láº¡i (demo) ===
const applyBtn = document.getElementById("applyFilter");
const resetBtn = document.getElementById("resetFilter");

applyBtn.addEventListener("click", () => {
  document.querySelectorAll(".card").forEach((card) => {
    card.style.display = Math.random() > 0.5 ? "block" : "none";
  });
  modal.style.display = "none";
});

resetBtn.addEventListener("click", () => {
  document.querySelectorAll(".card").forEach((card) => (card.style.display = "block"));
  rangeMin.value = 0;
  rangeMax.value = maxLimit;
  minInput.value = "0";
  maxInput.value = maxLimit.toLocaleString();
  fillTrack();
});

    </script>
  </body>
</html>
